## 437. 경로 합 III

### ## 예시 트리로 과정 따라가기

아래 트리와 `targetSum = 8` 예시로 과정을 하나씩 살펴보겠습니다.

      `10 (A)
     /  \
    5 (B) -3 (E)
/ \    \
3 (C) 2 (D) 11 (F)`

- **시작 상태**:
    - `count = 0`
    - `prefix_sum_map = {0: 1}` *(루트에서 시작하는 경로가 답이 되는 경우를 위해)*

### **1. (A) 노드 10 방문**

- **`current_sum`**: `0 + 10 = 10`
- **경로 확인**: `current_sum - targetSum` = `10 - 8 = 2`.
    - `prefix_sum_map`에 `2`가 있나요? **아니오.**
    - `count`는 그대로 `0`.
- **맵 업데이트**: 현재 누적 합 `10`을 맵에 추가합니다.
    - `prefix_sum_map = {0: 1, 10: 1}`
- 왼쪽 자식 (B)로 이동합니다.

### **2. (B) 노드 5 방문**

- **`current_sum`**: `10 + 5 = 15`
- **경로 확인**: `current_sum - targetSum` = `15 - 8 = 7`.
    - `prefix_sum_map`에 `7`이 있나요? **아니오.**
    - `count`는 그대로 `0`.
- **맵 업데이트**: 현재 누적 합 `15`를 맵에 추가합니다.
    - `prefix_sum_map = {0: 1, 10: 1, 15: 1}`
- 왼쪽 자식 (C)로 이동합니다.

### **3. (C) 노드 3 방문 - ✨ 첫 번째 경로 발견**

- **`current_sum`**: `15 + 3 = 18`
- **경로 확인**: `current_sum - targetSum` = `18 - 8 = 10`.
    - `prefix_sum_map`에 `10`이 있나요? **네! 1개가 있습니다.**
    - 이것이 의미하는 바: "루트부터 여기까지 합이 18인데, 예전에 루트부터 어딘가까지의 합이 10이었던 적이 있어. 그럼 그 '어딘가'부터 여기까지의 합은 18 - 10 = 8 이겠네!"
    - 그 '어딘가'는 바로 (A)노드 10입니다. 따라서 (A)노드 다음부터 (C)노드까지의 경로, 즉 **`5 -> 3`*의 합이 8이라는 것을 찾은 것입니다.
    - `count`를 1 증가시켜 `1`이 됩니다.
- **맵 업데이트**: 현재 누적 합 `18`을 맵에 추가합니다.
    - `prefix_sum_map = {0: 1, 10: 1, 15: 1, 18: 1}`
- (C)의 자식 탐색 후, 다시 (B)로 돌아가기 전 **백트래킹**을 합니다.
    - `prefix_sum_map`에서 `18`의 개수를 하나 줄입니다: `{0: 1, 10: 1, 15: 1, 18: 0}`

### **4. (D) 노드 2 방문 (B의 오른쪽 자식)**

- **(B)에서 왔으므로 `current_sum`은 15에서 시작**
- **`current_sum`**: `15 + 2 = 17`
- ... (경로 없음) ...

이 두 사실을 조합하면, **[(A) 다음 ~ (C)까지의 합] = 18 - 10 = 8** 이라는 결론이 나옵니다.
이 경로가 바로 `5 -> 3` 입니다.

```
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode() {}
 *     TreeNode(int val) { this.val = val; }
 *     TreeNode(int val, TreeNode left, TreeNode right) {
 *         this.val = val;
 *         this.left = left;
 *         this.right = right;
 *     }
 * }
 */
class Solution {
    public int pathSum(TreeNode root, int targetSum) {
        int tot=0;
        if(root==null){
            return 0;
        }
        HashMap<Long, Integer>map = new HashMap<>();
        map.put(0L,1);
        
        return helper(root,targetSum,0L,map);
    }

    public int helper(TreeNode root, int tar, long sum,  HashMap<Long, Integer>map) {
        if(root == null) {
            return 0;
        }
        int ans = 0;
        sum+=root.val;
        if(map.containsKey(sum-tar)){
            ans+=map.get(sum-tar);
        }
        map.put(sum,map.getOrDefault(sum,0)+1);
        ans+= helper(root.left,tar,sum,map);
        ans+= helper(root.right,tar,sum,map);
        map.put(sum,map.get(sum)-1);
        return ans;
    }
}
```
