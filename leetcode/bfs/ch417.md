## 417. Pacific Atlantic Water Flow

```java
class Solution {
    static int[] dx = {0,0,1,-1};
    static int[] dy = {1,-1,0,0};
    public List<List<Integer>> pacificAtlantic(int[][] heights) {
        ArrayList<List<Integer>> answer = new ArrayList();
        for(int i = 0; i< heights.length; i++) {
            for(int j = 0; j < heights[0].length; j++) {
                if(isFlow(i,j,heights)) {
                    ArrayList<Integer> node = new ArrayList();
                    node.add(i);
                    node.add(j);
                    answer.add(node);
                }
            }
        }

        return answer;
    }

    public boolean isFlow(int r, int c, int[][] heights) {
        boolean[][] visited = new boolean[heights.length][heights[0].length];
        visited[r][c] = true;
        Queue<int[]> queue = new LinkedList();
        queue.add(new int[]{r,c});

        boolean isPacific = false;
        boolean isAtlantic = false;

        while(!queue.isEmpty()) {
            int[] cur = queue.poll();

            if(cur[0] == 0 || cur[1] == 0) isPacific = true;
            if(cur[0] == heights.length-1 || cur[1] == heights[0].length-1) isAtlantic = true;

            if(isPacific && isAtlantic) return true;

            for(int i=0; i<4; i++) {
                int nextY = cur[0] + dy[i];
                int nextX = cur[1] + dx[i];
                if(isMoved(nextY, nextX, cur[0], cur[1], heights, visited)) {
                    visited[nextY][nextX] = true;
                    queue.add(new int[]{nextY, nextX});
                }
            }
        }

        return false;
    }

    public boolean isMoved(int nY, int nX, int cY, int cX, int[][] heights, boolean[][] visited) {
        if(nY >= heights.length || nY < 0) return false;
        if(nX >= heights[0].length || nX < 0) return false;
        if(visited[nY][nX]) return false;
        if(heights[cY][cX] < heights[nY][nX]) return false;

        return true;
    }
}
```
